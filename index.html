<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="日報・音声・コーチングチームの人件費を予想と実際で比較し、割合を可視化するツール">
  <title>予想 vs 実際経費 割合ツール</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header">
    <h1>予想 vs 実際経費 割合ツール</h1>
    <nav class="nav">
      <a href="index.html" class="nav-link active">計算画面</a>
      <a href="history.html" class="nav-link">過去データ</a>
      <a href="test.html" class="nav-link">テスト画面</a>
    </nav>
  </header>

  <main class="main">
    <!-- 計算ロジック概要 -->
    <section class="section overview-section">
      <h2>📐 人件費の計算ロジック</h2>
      <div class="overview-content">
        <div class="overview-block">
          <h3>日報チーム・音声チーム</h3>
          <p class="overview-formula">1人あたり/月 = 単価(円/時) × (対応分数 ÷ 60) × 営業日数 × (提出率 ÷ 100)</p>
          <p class="overview-note">例：2,282円/時 × 5分 ÷ 60 × 30日 × 100% = 5,705円/人</p>
        </div>
        <div class="overview-block">
          <h3>コーチングチーム</h3>
          <p class="overview-formula">1人あたり/月 = 単価(円/回) × 対応回数 × (提出率 ÷ 100)</p>
          <p class="overview-note">例：1,750円 × 4回 × 100% = 7,000円/人</p>
        </div>
        <div class="overview-block overview-total">
          <h3>合計</h3>
          <p class="overview-formula">全体合計 = (日報 + 音声 + コーチングの1人あたり合計) × 在籍生徒数</p>
        </div>
        <div class="overview-block overview-actual">
          <h3>実際（逆算）</h3>
          <p class="overview-formula">1人あたり = 支払い総額 ÷ 在籍生徒数</p>
        </div>
      </div>
    </section>

    <!-- 共通入力 -->
    <section class="section">
      <h2>共通入力</h2>
      <div id="validationWrap" class="validation-wrap hidden"></div>
      <div class="input-group">
        <label>対象月<input type="month" id="targetMonth" value="" title="集計対象の月を選択"></label>
        <label>在籍生徒数<input type="number" id="students" min="1" value="100" placeholder="必須" title="在籍している生徒の人数"></label>
        <label>営業日数<input type="number" id="businessDays" min="1" max="31" value="30" title="その月の営業日数（1〜31）"></label>
      </div>
      <div class="save-area">
        <button type="button" id="saveBtn" class="btn-save">この月のデータを保存</button>
        <button type="button" id="exportCsvBtn" class="btn-export">CSVダウンロード</button>
        <button type="button" onclick="window.print()" class="btn-print">印刷</button>
        <span id="saveMessage" class="save-message"></span>
      </div>
    </section>

    <!-- 日報チーム -->
    <section class="section compare-section section-collapsible" data-team="daily">
      <h2 class="section-toggle">📋 日報チーム</h2>
      <div class="section-collapse-body">
      <p class="section-desc">時給 × 対応分数/日 × 営業日数 × 提出率</p>
      <div class="compare-columns">
        <div class="compare-col compare-col-expected">
          <div class="compare-col-header">予想</div>
          <div class="compare-inputs">
            <label>単価（円/時）<input type="number" id="daily-price" min="0" value="2282"></label>
            <label>対応時間（分/人/日）<input type="number" id="daily-mins" min="0" value="5"></label>
            <label>提出率（%）<input type="number" id="daily-rate" min="0" max="100" value="100"></label>
          </div>
          <div class="compare-result">
            <div class="compare-result-row"><span>1人あたり/月</span><strong id="exp-daily-per">0円</strong></div>
            <div class="compare-result-row"><span>全体合計</span><strong id="exp-daily-total">0円</strong></div>
          </div>
        </div>
        <div class="compare-col compare-col-actual">
          <div class="compare-col-header">実際</div>
          <div class="compare-inputs">
            <label>支払い総額（円）<input type="number" id="actual-daily-payment" min="0" value="0" placeholder="実際に支払った金額"></label>
            <label>対応時間（分/人/日）<input type="number" id="actual-daily-mins" min="0" value="0" placeholder="実際の対応時間"></label>
            <label>提出率（%）<input type="number" id="actual-daily-rate" min="0" max="100" value="0" placeholder="実際の提出率"></label>
            <label>インセンティブ（円）<input type="number" id="actual-daily-incentive" min="0" value="0" placeholder="インセンティブ費用"></label>
            <label>備考<input type="text" id="actual-daily-note" value="" placeholder="メモ・備考"></label>
          </div>
          <div class="compare-result">
            <div class="compare-result-row"><span>1人あたり/月</span><strong id="act-daily-per">0円</strong></div>
            <div class="compare-result-row"><span>全体合計</span><strong id="act-daily-total">0円</strong></div>
            <div class="compare-result-row"><span>インセンティブ込み</span><strong id="act-daily-with-incentive">0円</strong></div>
          </div>
        </div>
        <div class="compare-col compare-col-diff">
          <div class="compare-col-header">差異</div>
          <div class="compare-diff-body">
            <div class="compare-result-row"><span>1人あたり差</span><strong id="diff-daily-per">-</strong></div>
            <div class="compare-result-row"><span>対応時間差</span><strong id="diff-daily-mins">-</strong></div>
            <div class="compare-result-row"><span>提出率差</span><strong id="diff-daily-rate">-</strong></div>
            <div class="compare-result-row"><span>割合</span><strong id="ratio-daily">-</strong></div>
          </div>
        </div>
      </div>
      </div>
    </section>

    <!-- 音声チーム -->
    <section class="section compare-section section-collapsible" data-team="voice">
      <h2 class="section-toggle">🎙 音声チーム</h2>
      <div class="section-collapse-body">
      <p class="section-desc">時給 × 対応分数/日 × 営業日数 × 提出率</p>
      <div class="compare-columns">
        <div class="compare-col compare-col-expected">
          <div class="compare-col-header">予想</div>
          <div class="compare-inputs">
            <label>単価（円/時）<input type="number" id="voice-price" min="0" value="1209"></label>
            <label>対応時間（分/人/日）<input type="number" id="voice-mins" min="0" value="4"></label>
            <label>提出率（%）<input type="number" id="voice-rate" min="0" max="100" value="100"></label>
          </div>
          <div class="compare-result">
            <div class="compare-result-row"><span>1人あたり/月</span><strong id="exp-voice-per">0円</strong></div>
            <div class="compare-result-row"><span>全体合計</span><strong id="exp-voice-total">0円</strong></div>
          </div>
        </div>
        <div class="compare-col compare-col-actual">
          <div class="compare-col-header">実際</div>
          <div class="compare-inputs">
            <label>支払い総額（円）<input type="number" id="actual-voice-payment" min="0" value="0" placeholder="実際に支払った金額"></label>
            <label>対応時間（分/人/日）<input type="number" id="actual-voice-mins" min="0" value="0" placeholder="実際の対応時間"></label>
            <label>提出率（%）<input type="number" id="actual-voice-rate" min="0" max="100" value="0" placeholder="実際の提出率"></label>
            <label>インセンティブ（円）<input type="number" id="actual-voice-incentive" min="0" value="0" placeholder="インセンティブ費用"></label>
            <label>備考<input type="text" id="actual-voice-note" value="" placeholder="メモ・備考"></label>
          </div>
          <div class="compare-result">
            <div class="compare-result-row"><span>1人あたり/月</span><strong id="act-voice-per">0円</strong></div>
            <div class="compare-result-row"><span>全体合計</span><strong id="act-voice-total">0円</strong></div>
            <div class="compare-result-row"><span>インセンティブ込み</span><strong id="act-voice-with-incentive">0円</strong></div>
          </div>
        </div>
        <div class="compare-col compare-col-diff">
          <div class="compare-col-header">差異</div>
          <div class="compare-diff-body">
            <div class="compare-result-row"><span>1人あたり差</span><strong id="diff-voice-per">-</strong></div>
            <div class="compare-result-row"><span>対応時間差</span><strong id="diff-voice-mins">-</strong></div>
            <div class="compare-result-row"><span>提出率差</span><strong id="diff-voice-rate">-</strong></div>
            <div class="compare-result-row"><span>割合</span><strong id="ratio-voice">-</strong></div>
          </div>
        </div>
      </div>
      </div>
    </section>

    <!-- コーチングチーム -->
    <section class="section compare-section section-collapsible" data-team="coaching">
      <h2 class="section-toggle">💬 コーチングチーム</h2>
      <div class="section-collapse-body">
      <p class="section-desc">単価 × 回数/月 × 提出率</p>
      <div class="compare-columns">
        <div class="compare-col compare-col-expected">
          <div class="compare-col-header">予想</div>
          <div class="compare-inputs">
            <label>単価（円/回）<input type="number" id="coaching-price" min="0" value="1750"></label>
            <label>対応回数（回/人/月）<input type="number" id="coaching-count" min="0" value="4"></label>
            <label>提出率（%）<input type="number" id="coaching-rate" min="0" max="100" value="100"></label>
          </div>
          <div class="compare-result">
            <div class="compare-result-row"><span>1人あたり/月</span><strong id="exp-coaching-per">0円</strong></div>
            <div class="compare-result-row"><span>全体合計</span><strong id="exp-coaching-total">0円</strong></div>
          </div>
        </div>
        <div class="compare-col compare-col-actual">
          <div class="compare-col-header">実際</div>
          <div class="compare-inputs">
            <label>支払い総額（円）<input type="number" id="actual-coaching-payment" min="0" value="0" placeholder="実際に支払った金額"></label>
            <label>対応回数（回/人/月）<input type="number" id="actual-coaching-count" min="0" value="0" placeholder="実際の回数"></label>
            <label>提出率（%）<input type="number" id="actual-coaching-rate" min="0" max="100" value="0" placeholder="実際の提出率"></label>
            <label>インセンティブ（円）<input type="number" id="actual-coaching-incentive" min="0" value="0" placeholder="インセンティブ費用"></label>
            <label>備考<input type="text" id="actual-coaching-note" value="" placeholder="メモ・備考"></label>
          </div>
          <div class="compare-result">
            <div class="compare-result-row"><span>1人あたり/月</span><strong id="act-coaching-per">0円</strong></div>
            <div class="compare-result-row"><span>全体合計</span><strong id="act-coaching-total">0円</strong></div>
            <div class="compare-result-row"><span>インセンティブ込み</span><strong id="act-coaching-with-incentive">0円</strong></div>
          </div>
        </div>
        <div class="compare-col compare-col-diff">
          <div class="compare-col-header">差異</div>
          <div class="compare-diff-body">
            <div class="compare-result-row"><span>1人あたり差</span><strong id="diff-coaching-per">-</strong></div>
            <div class="compare-result-row"><span>回数差</span><strong id="diff-coaching-count">-</strong></div>
            <div class="compare-result-row"><span>提出率差</span><strong id="diff-coaching-rate">-</strong></div>
            <div class="compare-result-row"><span>割合</span><strong id="ratio-coaching">-</strong></div>
          </div>
        </div>
      </div>
      </div>
    </section>

    <!-- 全体比較サマリー -->
    <section class="section summary-section">
      <h2>📊 全体サマリー</h2>
      <div class="summary-grid">
        <div class="summary-card summary-expected">
          <div class="summary-card-title">予想</div>
          <div class="summary-row"><span>1人あたり/月</span><strong id="result-per-student">0</strong>円</div>
          <div class="summary-row summary-row-total"><span>合計</span><strong id="result-total">0</strong>円</div>
        </div>
        <div class="summary-card summary-actual">
          <div class="summary-card-title">実際</div>
          <div class="summary-row"><span>1人あたり/月</span><strong id="actual-per-student">0</strong>円</div>
          <div class="summary-row summary-row-total"><span>合計</span><strong id="actual-total">0</strong>円</div>
          <div class="summary-row"><span>インセンティブ合計</span><strong id="incentive-total">0</strong>円</div>
          <div class="summary-row summary-row-total"><span>インセンティブ込み</span><strong id="actual-with-incentive-total">0</strong>円</div>
        </div>
        <div class="summary-card summary-diff">
          <div class="summary-card-title">比較</div>
          <div class="summary-row"><span>割合</span><strong id="ratio-value" class="ratio-value">-</strong></div>
          <div class="summary-row"><span>差異</span><strong id="ratio-diff" class="ratio-diff">-</strong></div>
          <div class="summary-row"><span>判定</span><strong id="ratio-judge" class="ratio-judge">-</strong></div>
        </div>
      </div>
      <div class="copy-buttons" style="margin-top:1rem;">
        <button type="button" id="copyExpectedToActual" class="btn-copy">予想の合計額 → 実際にコピー</button>
      </div>
    </section>
  </main>

  <script src="calculator.js"></script>
  <script src="app.js"></script>
</body>
</html>
